<!-- 
GitHub Pagesì— ì—…ë¡œë“œí•  OAuth ì½œë°± í˜ì´ì§€
íŒŒì¼ëª…: index.html
GitHub Pages URL ì˜ˆì‹œ: https://yourusername.github.io/oauth-callback/
-->

<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>OAuth 2.0 ì½œë°± ì²˜ë¦¬</title>
    <style>
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            max-width: 800px;
            margin: 0 auto;
            padding: 20px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            min-height: 100vh;
        }
        .container {
            background: rgba(255, 255, 255, 0.1);
            border-radius: 10px;
            padding: 30px;
            box-shadow: 0 8px 32px 0 rgba(31, 38, 135, 0.37);
            backdrop-filter: blur(4px);
            border: 1px solid rgba(255, 255, 255, 0.18);
        }
        .success {
            background: rgba(40, 167, 69, 0.2);
            border: 1px solid rgba(40, 167, 69, 0.5);
            border-radius: 5px;
            padding: 15px;
            margin: 20px 0;
        }
        .info {
            background: rgba(23, 162, 184, 0.2);
            border: 1px solid rgba(23, 162, 184, 0.5);
            border-radius: 5px;
            padding: 15px;
            margin: 20px 0;
        }
        .code-box {
            background: rgba(0, 0, 0, 0.3);
            border: 1px solid rgba(255, 255, 255, 0.2);
            border-radius: 5px;
            padding: 15px;
            font-family: 'Courier New', monospace;
            word-break: break-all;
            margin: 10px 0;
        }
        .copy-btn {
            background: #28a745;
            color: white;
            border: none;
            padding: 8px 16px;
            border-radius: 5px;
            cursor: pointer;
            margin-left: 10px;
        }
        .copy-btn:hover {
            background: #218838;
        }
        .step {
            margin: 20px 0;
            padding: 15px;
            background: rgba(255, 255, 255, 0.05);
            border-radius: 5px;
            border-left: 4px solid #ffc107;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>ğŸ” OAuth 2.0 ì¸ì¦ ì™„ë£Œ</h1>
        
        <div id="loading" class="info">
            <p>ğŸ“¡ URL íŒŒë¼ë¯¸í„°ë¥¼ ë¶„ì„í•˜ëŠ” ì¤‘...</p>
        </div>
        
        <div id="success" class="success" style="display: none;">
            <h3>âœ… ì¸ì¦ ì„±ê³µ!</h3>
            <p>Authorization Codeê°€ ì„±ê³µì ìœ¼ë¡œ ë°›ì•„ì™”ìŠµë‹ˆë‹¤.</p>
        </div>
        
        <div id="auth-code-section" style="display: none;">
            <h3>ğŸ“‹ Authorization Code</h3>
            <p>ì•„ë˜ ì½”ë“œë¥¼ Discord ë´‡ì—ì„œ ì‚¬ìš©í•˜ì„¸ìš”:</p>
            <div class="code-box">
                <span id="auth-code"></span>
                <button class="copy-btn" onclick="copyAuthCode()">ë³µì‚¬</button>
            </div>
        </div>
        
        <div id="state-section" style="display: none;">
            <h3>ğŸ” State ì •ë³´</h3>
            <div class="code-box">
                <span id="state-value"></span>
            </div>
        </div>
        
        <div id="error-section" style="display: none;">
            <h3>âŒ ì˜¤ë¥˜ ë°œìƒ</h3>
            <div class="code-box">
                <span id="error-details"></span>
            </div>
        </div>
        
        <div class="step">
            <h3>ğŸš€ ë‹¤ìŒ ë‹¨ê³„</h3>
            <ol>
                <li><strong>Authorization Code ë³µì‚¬</strong> (ìœ„ì˜ ë³µì‚¬ ë²„íŠ¼ í´ë¦­)</li>
                <li><strong>Discordì—ì„œ í† í° êµí™˜</strong>:</li>
            </ol>
            <div class="code-box">
                <div id="discord-command"></div>
            </div>
        </div>
        
        <div class="info">
            <h4>ğŸ’¡ ë„ì›€ë§</h4>
            <ul>
                <li>Authorization CodeëŠ” <strong>10ë¶„ ë‚´ì— ì‚¬ìš©</strong>í•´ì•¼ í•©ë‹ˆë‹¤</li>
                <li>ë¬¸ì œê°€ ë°œìƒí•˜ë©´ Discordì—ì„œ <code>/oauthê°€ì´ë“œ</code> ëª…ë ¹ì–´ë¥¼ í™•ì¸í•˜ì„¸ìš”</li>
                <li>ì´ í˜ì´ì§€ëŠ” GitHub Pagesì—ì„œ ì•ˆì „í•˜ê²Œ ì œê³µë©ë‹ˆë‹¤</li>
            </ul>
        </div>
    </div>

    <script>
        // URL íŒŒë¼ë¯¸í„° íŒŒì‹±
        function parseURLParams() {
            const urlParams = new URLSearchParams(window.location.search);
            const hashParams = new URLSearchParams(window.location.hash.substring(1));
            
            // Query íŒŒë¼ë¯¸í„°ì™€ Hash íŒŒë¼ë¯¸í„° ëª¨ë‘ í™•ì¸
            const code = urlParams.get('code') || hashParams.get('code');
            const state = urlParams.get('state') || hashParams.get('state');
            const error = urlParams.get('error') || hashParams.get('error');
            const errorDescription = urlParams.get('error_description') || hashParams.get('error_description');
            
            return { code, state, error, errorDescription };
        }
        
        // í˜ì´ì§€ ë¡œë“œ ì‹œ ì‹¤í–‰
        window.onload = function() {
            const { code, state, error, errorDescription } = parseURLParams();
            
            // ë¡œë”© ìˆ¨ê¸°ê¸°
            document.getElementById('loading').style.display = 'none';
            
            if (error) {
                // ì—ëŸ¬ ì²˜ë¦¬
                document.getElementById('error-section').style.display = 'block';
                document.getElementById('error-details').textContent = `${error}: ${errorDescription || 'ì•Œ ìˆ˜ ì—†ëŠ” ì˜¤ë¥˜'}`;
            } else if (code) {
                // ì„±ê³µ ì²˜ë¦¬
                document.getElementById('success').style.display = 'block';
                document.getElementById('auth-code-section').style.display = 'block';
                document.getElementById('auth-code').textContent = code;
                
                if (state) {
                    document.getElementById('state-section').style.display = 'block';
                    document.getElementById('state-value').textContent = state;
                }
                
                // Discord ëª…ë ¹ì–´ ìƒì„±
                const platform = state && state.includes('twitter') ? 'twitter' : 'threads';
                const discordCommand = `/í† í°êµí™˜ ${platform} [CLIENT_ID] [CLIENT_SECRET] ${code}`;
                document.getElementById('discord-command').textContent = discordCommand;
                
            } else {
                // íŒŒë¼ë¯¸í„° ì—†ìŒ
                document.getElementById('error-section').style.display = 'block';
                document.getElementById('error-details').textContent = 'URLì—ì„œ ì¸ì¦ íŒŒë¼ë¯¸í„°ë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.';
            }
        };
        
        // Authorization Code ë³µì‚¬ í•¨ìˆ˜
        function copyAuthCode() {
            const authCode = document.getElementById('auth-code').textContent;
            navigator.clipboard.writeText(authCode).then(function() {
                const btn = event.target;
                btn.textContent = 'ë³µì‚¬ë¨!';
                btn.style.background = '#218838';
                setTimeout(() => {
                    btn.textContent = 'ë³µì‚¬';
                    btn.style.background = '#28a745';
                }, 2000);
            }, function(err) {
                alert('ë³µì‚¬ ì‹¤íŒ¨: ' + err);
            });
        }
        
        // ìë™ìœ¼ë¡œ Authorization Code í´ë¦½ë³´ë“œì— ë³µì‚¬ (ì„ íƒì )
        window.onload = function() {
            // ê¸°ì¡´ ì½”ë“œ...
            
            // 5ì´ˆ í›„ ìë™ìœ¼ë¡œ Authorization Code ë³µì‚¬ (ì„ íƒì )
            if (document.getElementById('auth-code').textContent) {
                setTimeout(() => {
                    const authCode = document.getElementById('auth-code').textContent;
                    navigator.clipboard.writeText(authCode).then(() => {
                        console.log('Authorization Codeê°€ ìë™ìœ¼ë¡œ í´ë¦½ë³´ë“œì— ë³µì‚¬ë˜ì—ˆìŠµë‹ˆë‹¤.');
                    });
                }, 2000);
            }
        };
    </script>
</body>
</html>